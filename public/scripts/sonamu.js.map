{"version":3,"sources":["sonamu.js"],"names":["e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length","1","module","_extends","Object","assign","target","arguments","source","key","prototype","hasOwnProperty","$vm","scrollOption","mouseWheel","scrollbars","bounce","interactiveScrollbars","headers","Accept","Content-Type","vueData","showBox","searchData","keywords","nature","sort","id","type","filter","filterData","articles","folderData","state","tags","categories","userData","login","username","checkUsername","password","checkPassword","register","codeTime","email","checkEmail","checkCode","reset","userinfo","folderDataLoad","fetch","then","res","json","data","message","Vue","set","$nextTick","IScroll","userDataLoad","showRightBox","showFolderBox","this","showFilterBox","showUserBox","validate","validateFns","validateLoginUsername","test","validateLoginPassword","validateRegisterEmail","validateRegisterUsername","validateRegisterPassword","validateRegisterCode","validateResetEmail","validateResetCode","validateResetPassword","commonMethod","sendCode","_this","replace","v","toUpperCase","bind","method","body","JSON","stringify","alert","timer","setInterval","clearInterval","el","mounted","methods","window"],"mappings":"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","file":"sonamu.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n'use strict';\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar $vm = null;\n// 自定义滚动条配置\nvar scrollOption = {\n  mouseWheel: true,\n  scrollbars: true,\n  bounce: false,\n  interactiveScrollbars: true\n};\n\nvar headers = {\n  'Accept': 'application/json',\n  'Content-Type': 'application/json'\n};\n\nvar scrollObj = { filter: null, folder: null };\n\nvar vueData = {\n\n  showBox: 'filter', // filter(筛选) folder(分类标签)\n\n  searchData: { // 搜索内容\n    keywords: '', // 关键字\n    nature: 'all', // 文章来源 all(全部) original(原创) translate(翻译) reprint(转载) excerpt(节选)\n    sort: { // 排序\n      id: 'date', // 排序ID  （date, read, comment, collection, thumb）\n      type: 'desc' // 方式 desc/asc\n    },\n    filter: { // 筛选\n      type: '', // 筛选类型 tag/categories\n      id: '' // 筛选ID (标签/分类ID)\n    }\n  },\n\n  // 所有页面data都有一个state属性，0未加载  1 已加载 -1 加载失败\n\n  filterData: {\n    articles: [] // 文章列表\n  },\n  folderData: {\n    state: 0,\n    tags: [], // 标签列表\n    categories: [] // 分类列表\n  },\n  userData: {\n    state: 0,\n    login: {\n      username: '',\n      checkUsername: true,\n      password: '',\n      checkPassword: true\n    },\n    register: {\n      codeTime: 0,\n      username: '',\n      checkUsername: true,\n      password: '',\n      checkPassword: true,\n      email: '',\n      checkEmail: true,\n      code: '',\n      checkCode: true\n    },\n    reset: {\n      codeTime: 0,\n      email: '',\n      checkEmail: true,\n      password: '',\n      checkPassword: true,\n      code: '',\n      checkCode: true\n    },\n    userinfo: null\n  }\n};\n\n// 加载标签，分类数据\nvar folderDataLoad = function folderDataLoad() {\n  fetch('/folder/lists').then(function (res) {\n    return res.json();\n  }).then(function (data) {\n    if (data === -1) {\n      vueData.folderData.state = -1;\n      vueData.folderData.message = '服务器异常';\n      return;\n    }\n    vueData.folderData.state = 1;\n    Vue.set(vueData.folderData, 'tags', data.tags);\n    Vue.set(vueData.folderData, 'categories', data.categories);\n    $vm.$nextTick(function () {\n      return new IScroll('.right-folder', scrollOption);\n    });\n  });\n};\n\n// 加载用户信息\nvar userDataLoad = function userDataLoad() {\n  vueData.userData.state = 1;\n  // TODO 加载真实数据  设置userinfo\n  $vm.$nextTick(function () {\n    return new IScroll('.right-user', scrollOption);\n  });\n};\n\n/*********************************methods start************************************ */\n\n// 打开某个right\nvar showRightBox = {\n  showFolderBox: function showFolderBox() {\n    this.showBox = 'folder';\n    if (this.folderData.state !== 1) folderDataLoad();\n  },\n  showFilterBox: function showFilterBox() {\n    this.showBox = 'filter';\n  },\n  showUserBox: function showUserBox() {\n    this.showBox = 'user';\n    if (this.userData.state !== 1) userDataLoad();\n  }\n};\n\n// 表单验证 method\nvar validate = {\n  email: /^\\w+@\\w+\\.\\w+$/,\n  username: /^\\w{3,16}$/,\n  password: /^\\w{6,16}$/,\n  code: /^[a-z]{6}$/i\n};\n\nvar validateFns = {\n  // 登录验证\n  validateLoginUsername: function validateLoginUsername() {\n    return this.userData.login.checkUsername = validate.username.test(this.userData.login.username);\n  },\n  validateLoginPassword: function validateLoginPassword() {\n    return this.userData.login.checkPassword = validate.password.test(this.userData.login.password);\n  },\n\n  // 注册相关验证\n  validateRegisterEmail: function validateRegisterEmail() {\n    return this.userData.register.checkEmail = validate.email.test(this.userData.register.email);\n  },\n  validateRegisterUsername: function validateRegisterUsername() {\n    return this.userData.register.checkUsername = validate.username.test(this.userData.register.username);\n  },\n  validateRegisterPassword: function validateRegisterPassword() {\n    return this.userData.register.checkPassword = validate.password.test(this.userData.register.password);\n  },\n  validateRegisterCode: function validateRegisterCode() {\n    return this.userData.register.checkCode = validate.code.test(this.userData.register.code);\n  },\n\n  // 重置密码相关\n  validateResetEmail: function validateResetEmail() {\n    return this.userData.reset.checkEmail = validate.email.test(this.userData.reset.email);\n  },\n  validateResetCode: function validateResetCode() {\n    return this.userData.reset.checkCode = validate.code.test(this.userData.reset.code);\n  },\n  validateResetPassword: function validateResetPassword() {\n    return this.userData.reset.checkPassword = validate.password.test(this.userData.reset.password);\n  }\n};\n\n// 公共method\nvar commonMethod = {\n  sendCode: function sendCode(type) {\n    var _this = this;\n\n    var data = { type: type };\n    if (!this.userData[type].codeTime && validateFns['validate' + type.replace(/\\w/, function (v) {\n      return v.toUpperCase();\n    }) + 'Email'].bind(vueData)()) {\n      this.userData[type].codeTime = 61;\n      data.email = vueData.userData[type].email;\n      fetch('/common/sendCode', {\n        method: 'POST',\n        headers: headers,\n        body: JSON.stringify(data)\n      }).then(function (res) {\n        return res.json();\n      }).then(function (data) {\n        if (data) {\n          alert('发送验证码失败，请重试！');\n          _this.userData[type].codeTime = 0;\n        } else {\n          _this.userData[type].codeTime = 60;\n          var timer = setInterval(function () {\n            return --_this.userData[type].codeTime || clearInterval(timer);\n          }, 1000);\n        }\n      });\n    }\n  }\n};\n\n/*********************************methods end************************************ */\n\n$vm = new Vue({\n  el: '#app',\n  data: vueData,\n  mounted: function mounted() {\n    new IScroll('.layout_left', scrollOption);\n  },\n\n  methods: _extends({}, showRightBox, validateFns, commonMethod)\n});\n\nwindow.vueData = vueData;\n\n},{}]},{},[1]);\n"]}