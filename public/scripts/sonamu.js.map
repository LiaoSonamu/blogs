{"version":3,"sources":["sonamu.js"],"names":["e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length","1","module","_extends","Object","assign","target","arguments","source","key","prototype","hasOwnProperty","$vm","scrollOption","mouseWheel","scrollbars","bounce","interactiveScrollbars","fetchOption","headers","Accept","Content-Type","vueData","showBox","searchData","keywords","nature","sort","id","type","filter","filterData","articles","folderData","state","tags","categories","userData","userinfo","noLoginShow","registerData","time","email","password","isEmail","isPassword","isCode","folderDataLoad","fetch","then","res","json","data","message","Vue","set","$nextTick","IScroll","showRightBox","showFolderBox","this","showFilterBox","showLoginBox","showRegisterBox","showResetBox","showUserBox","validate","username","validateFns","validateRegisterPassword","test","validateRegisterEmail","validateRegisterCode","commonMethod","sendRegisterCode","_this","method","body","JSON","stringify","d","alert","timmer","setInterval","clearInterval","registerFn","console","log","el","mounted","methods","window"],"mappings":"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","file":"sonamu.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n'use strict';\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar $vm = null;\n// 自定义滚动条配置\nvar scrollOption = {\n  mouseWheel: true,\n  scrollbars: true,\n  bounce: false,\n  interactiveScrollbars: true\n};\n\nvar fetchOption = {\n  headers: {\n    'Accept': 'application/json',\n    'Content-Type': 'application/json'\n  }\n};\n\nvar scrollObj = { filter: null, folder: null };\n\nvar vueData = {\n  showBox: 'filter', // filter(筛选) folder(分类标签)\n  searchData: { // 搜索内容\n    keywords: '', // 关键字\n    nature: 'all', // 文章来源 all(全部) original(原创) translate(翻译) reprint(转载) excerpt(节选)\n    sort: { // 排序\n      id: 'date', // 排序ID  （date, read, comment, collection, thumb）\n      type: 'desc' // 方式 desc/asc\n    },\n    filter: { // 筛选\n      type: '', // 筛选类型 tag/categories\n      id: '' // 筛选ID (标签/分类ID)\n    }\n  },\n  filterData: {\n    articles: [] // 文章列表\n  },\n  folderData: {\n    state: 0,\n    tags: [], // 标签列表\n    categories: [] // 分类列表\n  },\n  userData: {\n    state: 0,\n    userinfo: null,\n    noLoginShow: 'login' // 未登录状态显示 login / register / reset ，登录状态忽略该字段\n  },\n  registerData: {\n    state: 0, time: 0, email: '', password: '', code: '', isEmail: true, isPassword: true, isCode: true\n  }\n};\n\n// 加载标签，分类数据\nvar folderDataLoad = function folderDataLoad() {\n  fetch('/folder/lists').then(function (res) {\n    return res.json();\n  }).then(function (data) {\n    if (data === -1) {\n      vueData.folderData.state = -1;\n      vueData.folderData.message = '服务器异常';\n      return;\n    }\n    vueData.folderData.state = 1;\n    Vue.set(vueData.folderData, 'tags', data.tags);\n    Vue.set(vueData.folderData, 'categories', data.categories);\n    $vm.$nextTick(function () {\n      return new IScroll('.right-folder', scrollOption);\n    });\n  });\n};\n\n/*********************************methods start************************************ */\n\n// 打开某个right\nvar showRightBox = {\n  showFolderBox: function showFolderBox() {\n    this.showBox = 'folder';\n    if (this.folderData.state !== 1) folderDataLoad();\n  },\n  showFilterBox: function showFilterBox() {\n    this.showBox = 'filter';\n  },\n  showLoginBox: function showLoginBox() {\n    this.showBox = this.userData.noLoginShow = 'login';\n  },\n  showRegisterBox: function showRegisterBox() {\n    this.showBox = this.userData.noLoginShow = 'register';\n  },\n  showResetBox: function showResetBox() {\n    this.showBox = this.userData.noLoginShow = 'reset';\n  },\n  showUserBox: function showUserBox() {\n    if (this.userData.state === 0) this.showBox = this.userData.noLoginShow;else this.showBox = 'user';\n  }\n};\n\n// 表单验证 method\nvar validate = {\n  email: /^\\w+@\\w+\\.\\w+$/,\n  username: /^\\w{6,20}$/,\n  password: /^\\w{6,16}$/,\n  code: /^[a-z]{6}$/i\n};\n\nvar validateFns = {\n  // 注册验证\n  validateRegisterPassword: function validateRegisterPassword() {\n    return this.registerData.isPassword = validate.password.test(this.registerData.password);\n  },\n  validateRegisterEmail: function validateRegisterEmail() {\n    return this.registerData.isEmail = validate.email.test(this.registerData.email);\n  },\n  validateRegisterCode: function validateRegisterCode() {\n    return this.registerData.isCode = validate.code.test(this.registerData.code);\n  }\n};\n\n// 公共method\nvar commonMethod = {\n  sendRegisterCode: function sendRegisterCode() {\n    var _this = this;\n\n    if (!this.registerData.time && this.validateRegisterEmail()) {\n      this.registerData.time = 61;\n      fetch('/common/sendCode', _extends({}, fetchOption, {\n        method: 'POST',\n        body: JSON.stringify({\n          type: 'register',\n          email: this.registerData.email\n        })\n      })).then(function (res) {\n        return res.json();\n      }).then(function (d) {\n        if (d) {\n          alert('验证码发送失败，请重试！');\n          _this.registerData.time = 0;\n        } else {\n          _this.registerData.time = 60;\n          var timmer = setInterval(function () {\n            return --_this.registerData.time <= 0 || clearInterval(timmer);\n          }, 1000);\n        }\n      }, function () {\n        return _this.registerData.time = 0;\n      });\n    }\n  },\n\n  // 注册\n  registerFn: function registerFn() {\n    // if(!this.registerData.state && this.validateRegisterEmail() && this.validateRegisterCode() && this.validateRegisterPassword()) {\n    fetch('/common/register', _extends({\n      method: 'POST'\n    }, fetchOption, {\n      body: JSON.stringify({\n        email: this.registerData.email,\n        password: this.registerData.password,\n        code: this.registerData.code\n      })\n    })).then(function (res) {\n      return res.json();\n    }).then(function (d) {\n      console.log(d);\n    });\n    // }\n  }\n};\n\n/*********************************methods end************************************ */\n\n$vm = new Vue({\n  el: '#app',\n  data: vueData,\n  mounted: function mounted() {\n    new IScroll('.layout_left', scrollOption);\n  },\n\n  methods: _extends({}, showRightBox, validateFns, commonMethod)\n});\n\nwindow.vueData = vueData;\n\n},{}]},{},[1]);\n"]}