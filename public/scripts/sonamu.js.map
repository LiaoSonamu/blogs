{"version":3,"sources":["sonamu.js"],"names":["e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length","1","module","_extends","Object","assign","target","arguments","source","key","prototype","hasOwnProperty","$vm","scrollOption","mouseWheel","scrollbars","bounce","interactiveScrollbars","fetchOption","headers","Accept","Content-Type","credentials","folderDataLoad","fetch","then","res","json","data","vueData","folderData","state","message","tags","categories","$nextTick","IScroll","showRightBox","rightBoxGo","box","this","historyBox","indexOf","splice","push","_ref","title","noctrls","showBoxData","rightBoxBack","pop","_ref2","rightBoxHome","_ref3","historyRemove","_len","x","Array","_key","filter","v","validate","email","username","password","validateFns","validateLoginEmail","loginData","isEmail","test","validateLoginPassword","isPassword","validateRegisterPassword","registerData","validateRegisterEmail","validateRegisterCode","isCode","commonMethod","sendRegisterCode","_this","time","method","body","JSON","stringify","type","d","alert","timmer","setInterval","clearInterval","loginFn","_this2","userinfo","registerFn","_this3","toUpperCase","Vue","el","mounted","methods","window"],"mappings":"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","file":"sonamu.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n'use strict';\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar $vm = null;\n// 自定义滚动条配置\nvar scrollOption = {\n  mouseWheel: true,\n  scrollbars: true,\n  bounce: false,\n  interactiveScrollbars: true\n};\n\nvar fetchOption = {\n  headers: {\n    'Accept': 'application/json',\n    'Content-Type': 'application/json'\n  },\n  credentials: 'include'\n};\n\nvar scrollObj = { filter: null, folder: null };\n\n// 加载标签，分类数据\nvar folderDataLoad = function folderDataLoad() {\n  fetch('/folder/lists', _extends({}, fetchOption)).then(function (res) {\n    return res.json();\n  }).then(function (data) {\n    if (data === -1) {\n      vueData.folderData.state = -1;\n      vueData.folderData.message = '服务器异常';\n      return 0;\n    }\n    vueData.folderData.state = 1;\n    vueData.folderData.tags = data.tags;\n    vueData.folderData.categories = data.categories;\n    $vm.$nextTick(function () {\n      return new IScroll('.right-folder', scrollOption);\n    });\n  });\n};\n\n/*********************************methods start************************************ */\n\n// 打开某个right\nvar showRightBox = {\n  rightBoxGo: function rightBoxGo(box) {\n    var i = this.historyBox.indexOf(box);\n    if (~i) box = this.historyBox.splice(i, 1)[0];\n    this.historyBox.push(box);\n    var _ref = this[box + 'Data'],\n        title = _ref.title,\n        noctrls = _ref.noctrls;\n\n    this.showBoxData.title = title;\n    this.showBoxData.noctrls = noctrls;\n    // 需要加载的页面\n    switch (box) {\n      case 'folder':\n        this.folderData.state !== 1 && folderDataLoad();break;\n    }\n  },\n  rightBoxBack: function rightBoxBack() {\n    this.historyBox.pop();\n    var box = this.historyBox[this.historyBox.length - 1];\n    var _ref2 = this[box + 'Data'],\n        title = _ref2.title,\n        noctrls = _ref2.noctrls;\n\n    this.showBoxData.title = title;\n    this.showBoxData.noctrls = noctrls;\n  },\n  rightBoxHome: function rightBoxHome() {\n    this.historyBox.splice(1);\n    var box = this.historyBox[this.historyBox.length - 1];\n    var _ref3 = this[box + 'Data'],\n        title = _ref3.title,\n        noctrls = _ref3.noctrls;\n\n    this.showBoxData.title = title;\n    this.showBoxData.noctrls = noctrls;\n  },\n\n  // 删除历史记录中的某些页面值， 避免在登录成功后返回到登录，注册等页面\n  historyRemove: function historyRemove() {\n    for (var _len = arguments.length, x = Array(_len), _key = 0; _key < _len; _key++) {\n      x[_key] = arguments[_key];\n    }\n\n    this.historyBox = this.historyBox.filter(function (v) {\n      return !~x.indexOf(v);\n    });\n  }\n};\n\n// 表单验证 method\nvar validate = {\n  email: /^\\w+@\\w+\\.\\w+$/,\n  username: /^\\w{6,20}$/,\n  password: /^\\w{6,16}$/,\n  code: /^[a-z]{6}$/i\n};\n\nvar validateFns = {\n  // 登录验证\n  validateLoginEmail: function validateLoginEmail() {\n    return this.loginData.isEmail = validate.email.test(this.loginData.email);\n  },\n  validateLoginPassword: function validateLoginPassword() {\n    return this.loginData.isPassword = validate.password.test(this.loginData.password);\n  },\n\n  // 注册验证\n  validateRegisterPassword: function validateRegisterPassword() {\n    return this.registerData.isPassword = validate.password.test(this.registerData.password);\n  },\n  validateRegisterEmail: function validateRegisterEmail() {\n    return this.registerData.isEmail = validate.email.test(this.registerData.email);\n  },\n  validateRegisterCode: function validateRegisterCode() {\n    return this.registerData.isCode = validate.code.test(this.registerData.code);\n  }\n};\n\n// 公共method\nvar commonMethod = {\n  sendRegisterCode: function sendRegisterCode() {\n    var _this = this;\n\n    if (!this.registerData.time && this.validateRegisterEmail()) {\n      this.registerData.time = 61;\n      fetch('/common/sendCode', _extends({}, fetchOption, {\n        method: 'POST',\n        body: JSON.stringify({\n          type: 'register',\n          email: this.registerData.email\n        })\n      })).then(function (res) {\n        return res.json();\n      }).then(function (d) {\n        if (d && d.code === -1) {\n          alert(d.message);\n          _this.registerData.time = 0;\n        } else {\n          _this.registerData.time = 60;\n          var timmer = setInterval(function () {\n            return --_this.registerData.time <= 0 && clearInterval(timmer);\n          }, 1000);\n        }\n      }, function () {\n        return _this.registerData.time = 0;\n      });\n    }\n  },\n\n  // 登录\n  loginFn: function loginFn() {\n    var _this2 = this;\n\n    if (!this.loginData.state && this.validateLoginEmail() && this.validateLoginPassword()) {\n      this.loginData.state = 1;\n      fetch('/common/login', _extends({\n        method: 'POST'\n      }, fetchOption, {\n        body: JSON.stringify({\n          email: this.loginData.email,\n          password: this.loginData.password\n        })\n      })).then(function (res) {\n        return res.json();\n      }).then(function (d) {\n        _this2.loginData.state = 0;\n        // 登录成功\n        if (d && d.code != -1) {\n          _this2.userinfo = d;\n          _this2.rightBoxGo('ucenter');\n          _this2.historyRemove('login', 'register');\n        } else alert(d.message);\n      }, function () {\n        alert('登录失败');\n        _this2.loginData.state = 0;\n      });\n    }\n  },\n\n  // 注册\n  registerFn: function registerFn() {\n    var _this3 = this;\n\n    if (!this.registerData.state && this.validateRegisterEmail() && this.validateRegisterCode() && this.validateRegisterPassword()) {\n      this.registerData.state = 1;\n      fetch('/common/register', _extends({\n        method: 'POST'\n      }, fetchOption, {\n        body: JSON.stringify({\n          email: this.registerData.email,\n          password: this.registerData.password,\n          code: this.registerData.code.toUpperCase()\n        })\n      })).then(function (res) {\n        return res.json();\n      }).then(function (d) {\n        _this3.registerData.state = 0;\n        if (d.code === -1) alert(d.message);else {\n          _this3.userinfo = d;\n          _this3.rightBoxGo('ucenter');\n          _this3.historyRemove('login', 'register');\n        }\n      }, function () {\n        alert('注册失败');\n        _this3.registerData.state = 0;\n      });\n    }\n  }\n};\n\n/*********************************methods end************************************ */\n\n$vm = new Vue({\n  el: '#app',\n  data: vueData,\n  mounted: function mounted() {\n    new IScroll('.layout_left', scrollOption);\n  },\n\n  methods: _extends({}, showRightBox, validateFns, commonMethod)\n});\n\nwindow.vueData = vueData;\n\n},{}]},{},[1]);\n"]}