{"version":3,"sources":["sonamu.js"],"names":["e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length","1","module","_extends","Object","assign","target","arguments","source","key","prototype","hasOwnProperty","$vm","scrollOption","mouseWheel","scrollbars","bounce","interactiveScrollbars","fetchOption","headers","Accept","Content-Type","credentials","folderDataLoad","fetch","then","res","json","data","vueData","folderData","state","message","tags","categories","$nextTick","IScroll","showRightBox","showFolderBox","this","showBox","showFilterBox","showLoginBox","userData","noLoginShow","showRegisterBox","showResetBox","showUserBox","userinfo","validate","email","username","password","validateFns","validateLoginEmail","loginData","isEmail","test","validateLoginPassword","isPassword","validateRegisterPassword","registerData","validateRegisterEmail","validateRegisterCode","isCode","commonMethod","sendRegisterCode","_this","time","method","body","JSON","stringify","type","d","alert","timmer","setInterval","clearInterval","registerFn","_this2","toUpperCase","Vue","el","mounted","methods","window"],"mappings":"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","file":"sonamu.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n'use strict';\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar $vm = null;\n// 自定义滚动条配置\nvar scrollOption = {\n  mouseWheel: true,\n  scrollbars: true,\n  bounce: false,\n  interactiveScrollbars: true\n};\n\nvar fetchOption = {\n  headers: {\n    'Accept': 'application/json',\n    'Content-Type': 'application/json'\n  },\n  credentials: 'include'\n};\n\nvar scrollObj = { filter: null, folder: null };\n\n// 加载标签，分类数据\nvar folderDataLoad = function folderDataLoad() {\n  fetch('/folder/lists', _extends({}, fetchOption)).then(function (res) {\n    return res.json();\n  }).then(function (data) {\n    if (data === -1) {\n      vueData.folderData.state = -1;\n      vueData.folderData.message = '服务器异常';\n      return 0;\n    }\n    vueData.folderData.state = 1;\n    vueData.folderData.tags = data.tags;\n    vueData.folderData.categories = data.categories;\n    $vm.$nextTick(function () {\n      return new IScroll('.right-folder', scrollOption);\n    });\n  });\n};\n\n/*********************************methods start************************************ */\n\n// 打开某个right\nvar showRightBox = {\n  showFolderBox: function showFolderBox() {\n    this.showBox = 'folder';\n    if (this.folderData.state !== 1) folderDataLoad();\n  },\n  showFilterBox: function showFilterBox() {\n    this.showBox = 'filter';\n  },\n  showLoginBox: function showLoginBox() {\n    this.showBox = this.userData.noLoginShow = 'login';\n  },\n  showRegisterBox: function showRegisterBox() {\n    this.showBox = this.userData.noLoginShow = 'register';\n  },\n  showResetBox: function showResetBox() {\n    this.showBox = this.userData.noLoginShow = 'reset';\n  },\n  showUserBox: function showUserBox() {\n    if (!this.userinfo) this.showBox = this.userData.noLoginShow;else this.showBox = 'user';\n  }\n};\n\n// 表单验证 method\nvar validate = {\n  email: /^\\w+@\\w+\\.\\w+$/,\n  username: /^\\w{6,20}$/,\n  password: /^\\w{6,16}$/,\n  code: /^[a-z]{6}$/i\n};\n\nvar validateFns = {\n  // 登录验证\n  validateLoginEmail: function validateLoginEmail() {\n    return this.loginData.isEmail = validate.email.test(this.loginData.email);\n  },\n  validateLoginPassword: function validateLoginPassword() {\n    return this.loginData.isPassword = validate.password.test(this.loginData.password);\n  },\n\n  // 注册验证\n  validateRegisterPassword: function validateRegisterPassword() {\n    return this.registerData.isPassword = validate.password.test(this.registerData.password);\n  },\n  validateRegisterEmail: function validateRegisterEmail() {\n    return this.registerData.isEmail = validate.email.test(this.registerData.email);\n  },\n  validateRegisterCode: function validateRegisterCode() {\n    return this.registerData.isCode = validate.code.test(this.registerData.code);\n  }\n};\n\n// 公共method\nvar commonMethod = {\n  sendRegisterCode: function sendRegisterCode() {\n    var _this = this;\n\n    if (!this.registerData.time && this.validateRegisterEmail()) {\n      this.registerData.time = 61;\n      fetch('/common/sendCode', _extends({}, fetchOption, {\n        method: 'POST',\n        body: JSON.stringify({\n          type: 'register',\n          email: this.registerData.email\n        })\n      })).then(function (res) {\n        return res.json();\n      }).then(function (d) {\n        if (d && d.code === -1) {\n          alert(d.message);\n          _this.registerData.time = 0;\n        } else {\n          _this.registerData.time = 60;\n          var timmer = setInterval(function () {\n            return --_this.registerData.time <= 0 && clearInterval(timmer);\n          }, 1000);\n        }\n      }, function () {\n        return _this.registerData.time = 0;\n      });\n    }\n  },\n\n  // 注册\n  registerFn: function registerFn() {\n    var _this2 = this;\n\n    if (!this.registerData.state && this.validateRegisterEmail() && this.validateRegisterCode() && this.validateRegisterPassword()) {\n      fetch('/common/register', _extends({\n        method: 'POST'\n      }, fetchOption, {\n        body: JSON.stringify({\n          email: this.registerData.email,\n          password: this.registerData.password,\n          code: this.registerData.code.toUpperCase()\n        })\n      })).then(function (res) {\n        return res.json();\n      }).then(function (d) {\n        if (d.code === -1) alert(d.message);else {\n          alert('注册成功！');\n          _this2.userinfo = d;\n          _this2.showFilterBox();\n        }\n      }, function () {\n        return alert('注册失败');\n      });\n    }\n  }\n};\n\n/*********************************methods end************************************ */\n\n$vm = new Vue({\n  el: '#app',\n  data: vueData,\n  mounted: function mounted() {\n    new IScroll('.layout_left', scrollOption);\n  },\n\n  methods: _extends({}, showRightBox, validateFns, commonMethod)\n});\n\nwindow.vueData = vueData;\n\n},{}]},{},[1]);\n"]}