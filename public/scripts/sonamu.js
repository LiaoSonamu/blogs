!function e(t,r,i){function a(o,n){if(!r[o]){if(!t[o]){var u="function"==typeof require&&require;if(!n&&u)return u(o,!0);if(s)return s(o,!0);var h=new Error("Cannot find module '"+o+"'");throw h.code="MODULE_NOT_FOUND",h}var l=r[o]={exports:{}};t[o][0].call(l.exports,function(e){var r=t[o][1][e];return a(r||e)},l,l.exports,e,t,r,i)}return r[o].exports}for(var s="function"==typeof require&&require,o=0;o<i.length;o++)a(i[o]);return a}({1:[function(e,t,r){"use strict";var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},a=null,s={mouseWheel:!0,scrollbars:!0,bounce:!1,interactiveScrollbars:!0},o={headers:{Accept:"application/json","Content-Type":"application/json"},credentials:"include"},n=function(){fetch("/folder/lists",i({},o)).then(function(e){return e.json()}).then(function(e){if(-1===e)return vueData.folderData.state=-1,vueData.folderData.message="服务器异常",0;vueData.folderData.state=1,vueData.folderData.tags=e.tags,vueData.folderData.categories=e.categories,a.$nextTick(function(){return new IScroll(".right-folder",s)})})},u={showFolderBox:function(){this.showBox="folder",1!==this.folderData.state&&n()},showFilterBox:function(){this.showBox="filter"},showLoginBox:function(){this.showBox=this.userData.noLoginShow="login"},showRegisterBox:function(){this.showBox=this.userData.noLoginShow="register"},showResetBox:function(){this.showBox=this.userData.noLoginShow="reset"},showUserBox:function(){this.userData.userinfo?this.showBox="user":this.showBox=this.userData.noLoginShow}},h={email:/^\w+@\w+\.\w+$/,username:/^\w{6,20}$/,password:/^\w{6,16}$/,code:/^[a-z]{6}$/i},l={validateRegisterPassword:function(){return this.registerData.isPassword=h.password.test(this.registerData.password)},validateRegisterEmail:function(){return this.registerData.isEmail=h.email.test(this.registerData.email)},validateRegisterCode:function(){return this.registerData.isCode=h.code.test(this.registerData.code)}},c={sendRegisterCode:function(){var e=this;!this.registerData.time&&this.validateRegisterEmail()&&(this.registerData.time=61,fetch("/common/sendCode",i({},o,{method:"POST",body:JSON.stringify({type:"register",email:this.registerData.email})})).then(function(e){return e.json()}).then(function(t){if(t&&-1===t.code)alert(t.message),e.registerData.time=0;else{e.registerData.time=60;var r=setInterval(function(){return--e.registerData.time<=0&&clearInterval(r)},1e3)}},function(){return e.registerData.time=0}))},registerFn:function(){var e=this;!this.registerData.state&&this.validateRegisterEmail()&&this.validateRegisterCode()&&this.validateRegisterPassword()&&fetch("/common/register",i({method:"POST"},o,{body:JSON.stringify({email:this.registerData.email,password:this.registerData.password,code:this.registerData.code.toUpperCase()})})).then(function(e){return e.json()}).then(function(t){-1===t.code?alert(t.message):(alert("注册成功！"),e.userData.userinfo=t,e.showFilterBox())},function(){return alert("注册失败")})}};a=new Vue({el:"#app",data:vueData,mounted:function(){new IScroll(".layout_left",s)},methods:i({},u,l,c)}),window.vueData=vueData},{}]},{},[1]);
//# sourceMappingURL=sonamu.js.map
