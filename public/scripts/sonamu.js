!function t(e,i,a){function s(o,n){if(!i[o]){if(!e[o]){var l="function"==typeof require&&require;if(!n&&l)return l(o,!0);if(r)return r(o,!0);var h=new Error("Cannot find module '"+o+"'");throw h.code="MODULE_NOT_FOUND",h}var u=i[o]={exports:{}};e[o][0].call(u.exports,function(t){var i=e[o][1][t];return s(i||t)},u,u.exports,t,e,i,a)}return i[o].exports}for(var r="function"==typeof require&&require,o=0;o<a.length;o++)s(a[o]);return s}({1:[function(t,e,i){"use strict";var a=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(t[a]=i[a])}return t},s=null,r={mouseWheel:!0,scrollbars:!0,bounce:!1,interactiveScrollbars:!0},o={headers:{Accept:"application/json","Content-Type":"application/json"},credentials:"include"},n=function(){fetch("/folder/lists",a({},o)).then(function(t){return t.json()}).then(function(t){if(-1===t)return vueData.folderData.state=-1,vueData.folderData.message="服务器异常",0;vueData.folderData.state=1,vueData.folderData.tags=t.tags,vueData.folderData.categories=t.categories,s.$nextTick(function(){return new IScroll(".right-folder",r)})})},l={showFolderBox:function(){this.showBox="folder",1!==this.folderData.state&&n()},showFilterBox:function(){this.showBox="filter"},showLoginBox:function(){this.showBox=this.userData.noLoginShow="login"},showRegisterBox:function(){this.showBox=this.userData.noLoginShow="register"},showResetBox:function(){this.showBox=this.userData.noLoginShow="reset"},showUserBox:function(){this.userinfo?this.showBox="user":this.showBox=this.userData.noLoginShow}},h={email:/^\w+@\w+\.\w+$/,username:/^\w{6,20}$/,password:/^\w{6,16}$/,code:/^[a-z]{6}$/i},u={validateLoginEmail:function(){return this.loginData.isEmail=h.email.test(this.loginData.email)},validateLoginPassword:function(){return this.loginData.isPassword=h.password.test(this.loginData.password)},validateRegisterPassword:function(){return this.registerData.isPassword=h.password.test(this.registerData.password)},validateRegisterEmail:function(){return this.registerData.isEmail=h.email.test(this.registerData.email)},validateRegisterCode:function(){return this.registerData.isCode=h.code.test(this.registerData.code)}},c={sendRegisterCode:function(){var t=this;!this.registerData.time&&this.validateRegisterEmail()&&(this.registerData.time=61,fetch("/common/sendCode",a({},o,{method:"POST",body:JSON.stringify({type:"register",email:this.registerData.email})})).then(function(t){return t.json()}).then(function(e){if(e&&-1===e.code)alert(e.message),t.registerData.time=0;else{t.registerData.time=60;var i=setInterval(function(){return--t.registerData.time<=0&&clearInterval(i)},1e3)}},function(){return t.registerData.time=0}))},loginFn:function(){var t=this;!this.loginData.state&&this.validateLoginEmail()&&this.validateLoginPassword()&&(this.loginData.state=1,fetch("/common/login",a({method:"POST"},o,{body:JSON.stringify({email:this.loginData.email,password:this.loginData.password})})).then(function(t){return t.json()}).then(function(e){t.loginData.state=0,e&&-1!=e.code?(t.userinfo=e,t.showFilterBox()):alert(e.message)},function(){alert("登录失败"),t.loginData.state=0}))},registerFn:function(){var t=this;!this.registerData.state&&this.validateRegisterEmail()&&this.validateRegisterCode()&&this.validateRegisterPassword()&&(this.registerData.state=1,fetch("/common/register",a({method:"POST"},o,{body:JSON.stringify({email:this.registerData.email,password:this.registerData.password,code:this.registerData.code.toUpperCase()})})).then(function(t){return t.json()}).then(function(e){t.registerData.state=0,-1===e.code?alert(e.message):(t.userinfo=e,t.showFilterBox())},function(){alert("注册失败"),t.registerData.state=0}))}};s=new Vue({el:"#app",data:vueData,mounted:function(){new IScroll(".layout_left",r)},methods:a({},l,u,c)}),window.vueData=vueData},{}]},{},[1]);
//# sourceMappingURL=sonamu.js.map
