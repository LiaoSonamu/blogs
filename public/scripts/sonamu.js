!function t(e,i,r){function a(o,n){if(!i[o]){if(!e[o]){var u="function"==typeof require&&require;if(!n&&u)return u(o,!0);if(s)return s(o,!0);var l=new Error("Cannot find module '"+o+"'");throw l.code="MODULE_NOT_FOUND",l}var h=i[o]={exports:{}};e[o][0].call(h.exports,function(t){var i=e[o][1][t];return a(i||t)},h,h.exports,t,e,i,r)}return i[o].exports}for(var s="function"==typeof require&&require,o=0;o<r.length;o++)a(r[o]);return a}({1:[function(t,e,i){"use strict";var r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(t[r]=i[r])}return t},a=null,s={mouseWheel:!0,scrollbars:!0,bounce:!1,interactiveScrollbars:!0},o={headers:{Accept:"application/json","Content-Type":"application/json"},credentials:"include"},n=function(){fetch("/folder/lists",r({},o)).then(function(t){return t.json()}).then(function(t){if(-1===t)return vueData.folderData.state=-1,vueData.folderData.message="服务器异常",0;vueData.folderData.state=1,vueData.folderData.tags=t.tags,vueData.folderData.categories=t.categories,a.$nextTick(function(){return new IScroll(".right-folder",s)})})},u={showFolderBox:function(){this.showBox="folder",1!==this.folderData.state&&n()},showFilterBox:function(){this.showBox="filter"},showLoginBox:function(){this.showBox=this.userData.noLoginShow="login"},showRegisterBox:function(){this.showBox=this.userData.noLoginShow="register"},showResetBox:function(){this.showBox=this.userData.noLoginShow="reset"},showUserBox:function(){this.userinfo?this.showBox="user":this.showBox=this.userData.noLoginShow}},l={email:/^\w+@\w+\.\w+$/,username:/^\w{6,20}$/,password:/^\w{6,16}$/,code:/^[a-z]{6}$/i},h={validateLoginEmail:function(){return this.loginData.isEmail=l.email.test(this.loginData.email)},validateLoginPassword:function(){return this.loginData.isPassword=l.password.test(this.loginData.password)},validateRegisterPassword:function(){return this.registerData.isPassword=l.password.test(this.registerData.password)},validateRegisterEmail:function(){return this.registerData.isEmail=l.email.test(this.registerData.email)},validateRegisterCode:function(){return this.registerData.isCode=l.code.test(this.registerData.code)}},c={sendRegisterCode:function(){var t=this;!this.registerData.time&&this.validateRegisterEmail()&&(this.registerData.time=61,fetch("/common/sendCode",r({},o,{method:"POST",body:JSON.stringify({type:"register",email:this.registerData.email})})).then(function(t){return t.json()}).then(function(e){if(e&&-1===e.code)alert(e.message),t.registerData.time=0;else{t.registerData.time=60;var i=setInterval(function(){return--t.registerData.time<=0&&clearInterval(i)},1e3)}},function(){return t.registerData.time=0}))},registerFn:function(){var t=this;!this.registerData.state&&this.validateRegisterEmail()&&this.validateRegisterCode()&&this.validateRegisterPassword()&&fetch("/common/register",r({method:"POST"},o,{body:JSON.stringify({email:this.registerData.email,password:this.registerData.password,code:this.registerData.code.toUpperCase()})})).then(function(t){return t.json()}).then(function(e){-1===e.code?alert(e.message):(alert("注册成功！"),t.userinfo=e,t.showFilterBox())},function(){return alert("注册失败")})}};a=new Vue({el:"#app",data:vueData,mounted:function(){new IScroll(".layout_left",s)},methods:r({},u,h,c)}),window.vueData=vueData},{}]},{},[1]);
//# sourceMappingURL=sonamu.js.map
