!function t(e,r,i){function o(a,n){if(!r[a]){if(!e[a]){var u="function"==typeof require&&require;if(!n&&u)return u(a,!0);if(s)return s(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var h=r[a]={exports:{}};e[a][0].call(h.exports,function(t){var r=e[a][1][t];return o(r||t)},h,h.exports,t,e,r,i)}return r[a].exports}for(var s="function"==typeof require&&require,a=0;a<i.length;a++)o(i[a]);return o}({1:[function(t,e,r){"use strict";var i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},o=null,s={mouseWheel:!0,scrollbars:!0,bounce:!1,interactiveScrollbars:!0},a={headers:{Accept:"application/json","Content-Type":"application/json"}},n={showBox:"filter",searchData:{keywords:"",nature:"all",sort:{id:"date",type:"desc"},filter:{type:"",id:""}},filterData:{articles:[]},folderData:{state:0,tags:[],categories:[]},userData:{state:0,userinfo:null,noLoginShow:"login"},registerData:{state:0,time:0,email:"",password:"",code:"",isEmail:!0,isPassword:!0,isCode:!0}},u=function(){fetch("/folder/lists").then(function(t){return t.json()}).then(function(t){if(-1===t)return n.folderData.state=-1,void(n.folderData.message="服务器异常");n.folderData.state=1,Vue.set(n.folderData,"tags",t.tags),Vue.set(n.folderData,"categories",t.categories),o.$nextTick(function(){return new IScroll(".right-folder",s)})})},l={showFolderBox:function(){this.showBox="folder",1!==this.folderData.state&&u()},showFilterBox:function(){this.showBox="filter"},showLoginBox:function(){this.showBox=this.userData.noLoginShow="login"},showRegisterBox:function(){this.showBox=this.userData.noLoginShow="register"},showResetBox:function(){this.showBox=this.userData.noLoginShow="reset"},showUserBox:function(){0===this.userData.state?this.showBox=this.userData.noLoginShow:this.showBox="user"}},h={email:/^\w+@\w+\.\w+$/,username:/^\w{6,20}$/,password:/^\w{6,16}$/,code:/^[a-z]{6}$/i},c={validateRegisterPassword:function(){return this.registerData.isPassword=h.password.test(this.registerData.password)},validateRegisterEmail:function(){return this.registerData.isEmail=h.email.test(this.registerData.email)},validateRegisterCode:function(){return this.registerData.isCode=h.code.test(this.registerData.code)}},f={sendRegisterCode:function(){var t=this;!this.registerData.time&&this.validateRegisterEmail()&&(this.registerData.time=61,fetch("/common/sendCode",i({},a,{method:"POST",body:JSON.stringify({type:"register",email:this.registerData.email})})).then(function(t){return t.json()}).then(function(e){if(e)alert("验证码发送失败，请重试！"),t.registerData.time=0;else{t.registerData.time=60;var r=setInterval(function(){return--t.registerData.time<=0||clearInterval(r)},1e3)}},function(){return t.registerData.time=0}))},registerFn:function(){fetch("/common/register",i({method:"POST"},a,{body:JSON.stringify({email:this.registerData.email,password:this.registerData.password,code:this.registerData.code})})).then(function(t){return t.json()}).then(function(t){console.log(t)})}};o=new Vue({el:"#app",data:n,mounted:function(){new IScroll(".layout_left",s)},methods:i({},l,c,f)}),window.vueData=n},{}]},{},[1]);
//# sourceMappingURL=sonamu.js.map
