!function t(e,i,a){function r(o,n){if(!i[o]){if(!e[o]){var h="function"==typeof require&&require;if(!n&&h)return h(o,!0);if(s)return s(o,!0);var l=new Error("Cannot find module '"+o+"'");throw l.code="MODULE_NOT_FOUND",l}var c=i[o]={exports:{}};e[o][0].call(c.exports,function(t){var i=e[o][1][t];return r(i||t)},c,c.exports,t,e,i,a)}return i[o].exports}for(var s="function"==typeof require&&require,o=0;o<a.length;o++)r(a[o]);return r}({1:[function(t,e,i){"use strict";var a=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(t[a]=i[a])}return t},r=null,s={mouseWheel:!0,scrollbars:!0,bounce:!1,interactiveScrollbars:!0},o={headers:{Accept:"application/json","Content-Type":"application/json"},credentials:"include"},n=function(){fetch("/folder/lists",a({},o)).then(function(t){return t.json()}).then(function(t){if(-1===t)return vueData.folderData.state=-1,vueData.folderData.message="服务器异常",0;vueData.folderData.state=1,vueData.folderData.tags=t.tags,vueData.folderData.categories=t.categories,r.$nextTick(function(){return new IScroll(".right-folder",s)})})},h={rightBoxGo:function(t){var e=this.historyBox.indexOf(t);~e&&(t=this.historyBox.splice(e,1)[0]),this.historyBox.push(t);var i=this[t+"Data"],a=i.title,r=i.noctrls;switch(this.showBoxData.title=a,this.showBoxData.noctrls=r,t){case"folder":1!==this.folderData.state&&n()}},rightBoxBack:function(){this.historyBox.pop();var t=this[this.historyBox[this.historyBox.length-1]+"Data"],e=t.title,i=t.noctrls;this.showBoxData.title=e,this.showBoxData.noctrls=i},rightBoxHome:function(){this.historyBox.splice(1);var t=this[this.historyBox[this.historyBox.length-1]+"Data"],e=t.title,i=t.noctrls;this.showBoxData.title=e,this.showBoxData.noctrls=i},historyRemove:function(){for(var t=arguments.length,e=Array(t),i=0;i<t;i++)e[i]=arguments[i];this.historyBox=this.historyBox.filter(function(t){return!~e.indexOf(t)})}},l={email:/^\w+@\w+\.\w+$/,username:/^\w{6,20}$/,password:/^\w{6,16}$/,code:/^[a-z]{6}$/i},c={validateLoginEmail:function(){return this.loginData.isEmail=l.email.test(this.loginData.email)},validateLoginPassword:function(){return this.loginData.isPassword=l.password.test(this.loginData.password)},validateRegisterPassword:function(){return this.registerData.isPassword=l.password.test(this.registerData.password)},validateRegisterEmail:function(){return this.registerData.isEmail=l.email.test(this.registerData.email)},validateRegisterCode:function(){return this.registerData.isCode=l.code.test(this.registerData.code)}},u={sendRegisterCode:function(){var t=this;!this.registerData.time&&this.validateRegisterEmail()&&(this.registerData.time=61,fetch("/common/sendCode",a({},o,{method:"POST",body:JSON.stringify({type:"register",email:this.registerData.email})})).then(function(t){return t.json()}).then(function(e){if(e&&-1===e.code)alert(e.message),t.registerData.time=0;else{t.registerData.time=60;var i=setInterval(function(){return--t.registerData.time<=0&&clearInterval(i)},1e3)}},function(){return t.registerData.time=0}))},loginFn:function(){var t=this;!this.loginData.state&&this.validateLoginEmail()&&this.validateLoginPassword()&&(this.loginData.state=1,fetch("/common/login",a({method:"POST"},o,{body:JSON.stringify({email:this.loginData.email,password:this.loginData.password})})).then(function(t){return t.json()}).then(function(e){t.loginData.state=0,e&&-1!=e.code?(t.userinfo=e,t.rightBoxGo("ucenter"),t.historyRemove("login","register")):alert(e.message)},function(){alert("登录失败"),t.loginData.state=0}))},registerFn:function(){var t=this;!this.registerData.state&&this.validateRegisterEmail()&&this.validateRegisterCode()&&this.validateRegisterPassword()&&(this.registerData.state=1,fetch("/common/register",a({method:"POST"},o,{body:JSON.stringify({email:this.registerData.email,password:this.registerData.password,code:this.registerData.code.toUpperCase()})})).then(function(t){return t.json()}).then(function(e){t.registerData.state=0,-1===e.code?alert(e.message):(t.userinfo=e,t.rightBoxGo("ucenter"),t.historyRemove("login","register"))},function(){alert("注册失败"),t.registerData.state=0}))}};r=new Vue({el:"#app",data:vueData,mounted:function(){new IScroll(".layout_left",s)},methods:a({},h,c,u)}),window.vueData=vueData},{}]},{},[1]);
//# sourceMappingURL=sonamu.js.map
