!function t(e,i,a){function r(o,n){if(!i[o]){if(!e[o]){var l="function"==typeof require&&require;if(!n&&l)return l(o,!0);if(s)return s(o,!0);var u=new Error("Cannot find module '"+o+"'");throw u.code="MODULE_NOT_FOUND",u}var h=i[o]={exports:{}};e[o][0].call(h.exports,function(t){var i=e[o][1][t];return r(i||t)},h,h.exports,t,e,i,a)}return i[o].exports}for(var s="function"==typeof require&&require,o=0;o<a.length;o++)r(a[o]);return r}({1:[function(t,e,i){"use strict";var a=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(t[a]=i[a])}return t},r=null,s={mouseWheel:!0,scrollbars:!0,bounce:!1,interactiveScrollbars:!0},o={headers:{Accept:"application/json","Content-Type":"application/json"},credentials:"include"},n=function(){fetch("/folder/lists",a({},o)).then(function(t){return t.json()}).then(function(t){if(-1===t)return vueData.folderData.state=-1,vueData.folderData.message="服务器异常",0;vueData.folderData.state=1,vueData.folderData.tags=t.tags,vueData.folderData.categories=t.categories,r.$nextTick(function(){return new IScroll(".right-folder",s)})})},l={showFolderBox:function(){this.showBox="folder",1!==this.folderData.state&&n()},showFilterBox:function(){this.showBox="filter"},showLoginBox:function(){this.showBox=this.userData.noLoginShow="login"},showRegisterBox:function(){this.showBox=this.userData.noLoginShow="register"},showResetBox:function(){this.showBox=this.userData.noLoginShow="reset"},showUserBox:function(){this.userinfo?this.showBox="user":this.showBox=this.userData.noLoginShow}},u={email:/^\w+@\w+\.\w+$/,username:/^\w{6,20}$/,password:/^\w{6,16}$/,code:/^[a-z]{6}$/i},h={validateLoginEmail:function(){return this.loginData.isEmail=u.email.test(this.loginData.email)},validateLoginPassword:function(){return this.loginData.isPassword=u.password.test(this.loginData.password)},validateRegisterPassword:function(){return this.registerData.isPassword=u.password.test(this.registerData.password)},validateRegisterEmail:function(){return this.registerData.isEmail=u.email.test(this.registerData.email)},validateRegisterCode:function(){return this.registerData.isCode=u.code.test(this.registerData.code)}},c={sendRegisterCode:function(){var t=this;!this.registerData.time&&this.validateRegisterEmail()&&(this.registerData.time=61,fetch("/common/sendCode",a({},o,{method:"POST",body:JSON.stringify({type:"register",email:this.registerData.email})})).then(function(t){return t.json()}).then(function(e){if(e&&-1===e.code)alert(e.message),t.registerData.time=0;else{t.registerData.time=60;var i=setInterval(function(){return--t.registerData.time<=0&&clearInterval(i)},1e3)}},function(){return t.registerData.time=0}))},loginFn:function(){!this.loginData.state&&this.validateLoginEmail()&&this.validateLoginPassword()&&(this.loginData.state=1)},registerFn:function(){var t=this;!this.registerData.state&&this.validateRegisterEmail()&&this.validateRegisterCode()&&this.validateRegisterPassword()&&(this.registerData.state=1,fetch("/common/register",a({method:"POST"},o,{body:JSON.stringify({email:this.registerData.email,password:this.registerData.password,code:this.registerData.code.toUpperCase()})})).then(function(t){return t.json()}).then(function(e){t.registerData.state=0,-1===e.code?alert(e.message):(alert("注册成功！"),t.userinfo=e,t.showFilterBox())},function(){t.registerData.state=0,alert("注册失败")}))}};r=new Vue({el:"#app",data:vueData,mounted:function(){new IScroll(".layout_left",s)},methods:a({},l,h,c)}),window.vueData=vueData},{}]},{},[1]);
//# sourceMappingURL=sonamu.js.map
